---
apiVersion: source.toolkit.fluxcd.io/v1beta1
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: trains
  namespace: trains
spec:
  releaseName: trains
  chart: ./trains-server-chart
  sourceRef:
    kind: GitRepository
    name: github
    namespace: flux-system
  interval: 1m
  values:
    trains:
      nodeSelector: "app: trains"
    agent:
      agentVersion: "==0.16.2rc0"
      numberOfTrainsAgents: 1
      nvidiaGpusPerAgent: 1
      defaultBaseDocker: "nvidia/cuda"
      trainsApiHost: "http://trains.namecheapcloud.net:30008"
      trainsWebHost: "http://trains.namecheapcloud.net:30080"
      trainsFilesHost: "http://trains.namecheapcloud.net:30081"
      trainsAccessKey: "HDUSYJ0T2V6W9GX4ZESL"
      trainsSecretKey: "e!@ys(DMZhZ!6RzV+ERAXKnOY8xT!Z2hb%-=w3c-SgA1=O%6ej"
